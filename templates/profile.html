<!DOCTYPE html>
<html>
<head>
  <title>@{{ user[0] }}</title>
  <style>
    body { margin:0; font-family:sans-serif; background:#000; color:white; overflow:hidden; display:flex; justify-content:center; align-items:center; height:100vh; }
    canvas { position:fixed; top:0; left:0; z-index:-1; }
    .profile-card { text-align:center; }
    .profile-card img { width:120px; height:120px; border-radius:50%; margin-bottom:15px; border:3px solid #00aaff; }
    h1 { margin:5px 0; font-size:28px; color:#00aaff; }
    .bio { font-size:16px; margin-bottom:15px; }
    .link-btn { display:block; margin:5px auto; padding:8px 15px; background:#00aaff; color:black; text-decoration:none; border-radius:8px; width:150px; }
    iframe { margin-top:15px; border-radius:10px; }
  </style>
</head>
<body>

<canvas id="particles"></canvas>

<div class="profile-card">
  {% if user[5] %}
    <img src="{{ user[5] }}" alt="Profile Photo">
  {% endif %}
  <h1>@{{ user[0] }}</h1>
  <div class="bio">{{ user[2] }}</div>

  {% for link in [user[3], user[6], user[7]] %}
    {% if link %}<a href="{{ link }}" target="_blank" class="link-btn">{{ link }}</a>{% endif %}
  {% endfor %}

  {% if user[4] %}
    <!-- Spotify embed autoplay -->
    <iframe src="https://open.spotify.com/embed/track/{{ user[4].split('/')[-1] }}?autoplay=1" width="300" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
  {% endif %}
</div>

<script>
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
for(let i=0;i<120;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:Math.random()*2+1,
    dx:(Math.random()-0.5),
    dy:(Math.random()-0.5)
  });
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#00aaff";
  particles.forEach(p=>{
    p.x+=p.dx; p.y+=p.dy;
    if(p.x<0||p.x>canvas.width)p.dx*=-1;
    if(p.y<0||p.y>canvas.height)p.dy*=-1;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
